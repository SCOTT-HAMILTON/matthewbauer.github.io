<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="https://matthewbauer.us/blog/feed.xml"
      title="RSS feed for https://matthewbauer.us/blog/"/>
<title>nix-buffer: nix-shell in Emacs</title>
  <meta name="author" content="Matthew Bauer">
  <meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1">
  <link rel="stylesheet" href="../style.css"></head>
<body>
<div id="preamble" class="status">
<h1>♟<a class="name" href="..">Matthew Bauer</a> ◌ <a href=".">Blog</a> ◌ <a class="name" href="feed.xml">RSS</a></h1></div>
<div id="content">
<div class="post-date">10 Feb 2018</div><h1 class="post-title"><a href="https://matthewbauer.us/blog/nix-buffer.html">nix-buffer: nix-shell in Emacs</a></h1>
<p>
Shea Levy has a wonderful package out for users of Nix and Emacs. It’s
called <a href="https://github.com/shlevy/nix-buffer">nix-buffer</a> and it greatly improves working on Nix stuff in
Emacs. To try it just get it from MELPA by running <code>M-x
package-install&lt;RET&gt;nix-buffer</code>.
</p>

<p>
To use it in a project you need to create a new file in your project
directory called <code>dir-locals.nix</code>. It works a lot like
<code>.dir-locals.el</code> but it allows you to evaluate Nix expressions.
</p>

<p>
To setup, just create <code>dir-locals.nix</code> that looks like this:
</p>

<div class="org-src-container">
<pre class="src src-nix"><span class="org-nix-keyword">let</span> <span class="org-nix-attribute">pkgs</span> = <span class="org-nix-builtin">import</span> <span class="org-nix-constant">&lt;nixpkgs&gt;</span> {};
<span class="org-nix-keyword">in</span> with pkgs; nixBufferBuilders.withPackages [ &#8230; ]
</pre>
</div>

<p>
You can put anything from Nixpkgs inside of <code>withPackages</code>. That path
is added to your exec-path in Emacs. Using this you can wrap your
project in a container and avoid conflicts between project configurations!
</p>

<p>
There’s lot of future extensions for this. Ideally we could skip and
the <code>dir-locals.nix</code> configuration and automatically detect what
dependencies you need based on your <code>default.nix</code> file.
</p>
</div>
<div id="postamble" class="status"></div>
</body>
</html>
